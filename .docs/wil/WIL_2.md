# Weekly I Learned 2 (소프트웨어 설계)

## 코드 짜기 전에 그림부터 그려야 한다고?

이번 주는 **설계**에 대해 배웠다. 솔직히 처음엔 "그냥 코드 짜면 되지, 다이어그램은 왜 그려?" 싶었는데... 실무에서 문서 안 읽고 코드부터 짰다간 진짜 큰일 나겠더라.

## 문서 읽기: 요구사항을 코드로 옮기는 첫걸음

우리 팀에서 회원 관련 배치를 만들어야 했는데, 시작하기 전에 먼저 읽어야 할 문서들이 산더미였다:

1. **회원 테이블의 ERD** - 어떤 테이블이 있고, 어떻게 연결되는지
2. **회원가입/인증/고객확인 Flow Chart** - 고객이 어떤 과정을 거쳐 인증되는지
3. **기존 회원 API 클래스의 인터페이스와 객체설계** - 레거시 코드는 어떻게 짜여져 있는지
4. **고객의 상태 흐름도** - 고객 상태가 어떻게 전이되는지

이걸 안 읽었으면 회원 상태 하나 바꾸는데도 사이드 이펙트가 어디서 터질지 몰랐을 것 같다.

## 설계 작업: 배치 구현 전 청사진 그리기

요구사항을 이해했으니 이제 구현 설계를 해야 했다.

### 1. Spring Batch 객체 설계 및 Flow Chart
- Reader, Processor, Writer를 어떻게 구현할지 클래스 다이어그램으로 정리
- 각 단계에서 어떤 도메인 객체가 협력하는지 시퀀스 다이어그램으로 표현
- **왜 필요했나?** → 팀원들과 "이렇게 짜면 되겠지?" 하는 합의 지점을 만들기 위해

### 2. ERD와 병렬 처리 전략
- Oracle의 **Degree Of Parallelism(DOP)**을 활용해야 해서 테이블별로 병렬 처리 가능한 수준을 조사
- 어떤 테이블을 어떻게 읽고, 어디에 저장할지 ERD 다이어그램으로 정리
- **왜 필요했나?** → 배치가 너무 느리면 실서비스 DB에 락이 걸려서 장애로 이어질 수 있음

### 3. 스케줄 작성과 영향도 분석
- 배치를 언제 돌릴지 스케줄표 작성
- 실서비스에 미칠 수 있는 영향도 분석 (CPU, 메모리, Lock 대기 등)
- **왜 필요했나?** → 새벽 2시에 배치 돌렸는데 DB 터지면... 그냥 끝

## 이번 주 배운 핵심

- **요구사항 정리**: 기획자, 디자이너, 개발자가 같은 말을 하고 있는지 확인하는 과정
- **유비쿼터스 언어**: "상품"이라는 단어를 코드에서도, 문서에서도, 회의에서도 동일하게 사용하기
- **시퀀스 다이어그램**: "누가 무엇을 책임지는가"를 명확히 표현
- **ERD 설계**: 도메인 모델을 물리적 테이블로 옮기는 과정

설계 없이 코드부터 짜는 건 지도 없이 등산하는 거랑 똑같더라. 이제부터는 코드 짜기 전에 다이어그램부터 그려야겠다!
