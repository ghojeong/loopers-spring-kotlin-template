# Weekly I Learned 1 (TDD)

## 테스트 코드, 그냥 귀찮은 거 아니었어?

이번 주는 TDD에 대해 제대로 배워봤다. 사실 처음엔 "테스트 코드? 그거 그냥 귀찮은 거 아닌가?" 싶었는데, 막상 해보니까 완전 다른 세계였음.

## 실무에서 마주한 테스트의 진짜 가치

우리 회사는 DEV, QA, Prod 환경으로 나뉘어져 있는데, 내가 작업하던 코드를 병합해서 올리면 자동으로 테스트가 돌아간다. 처음엔 "CI/CD 파이프라인이 그렇구나~" 정도로만 생각했는데, 이게 단순히 자동화만의 문제가 아니었음.

Redis, Kafka, Oracle 같은 외부 의존성들이 잔뜩 있는 프로젝트였는데, 테스트 환경을 제대로 구축하려면 이 녀석들을 어떻게 모킹(Mocking)하고, 어떻게 격리시킬지 알아야 했다. 그 과정에서 자연스럽게:

- **TestContainers로 실제 DB 환경 띄우기**
- **Redis Embedded로 캐시 테스트하기**
- **Kafka Test Utils로 메시지 발행/소비 검증하기**

이런 걸 다 공부하게 됐고, 덕분에 로컬 개발 환경도 제대로 구축할 수 있었음.

## 테스트를 무시했다면?

솔직히 테스트를 무시하고 그냥 구현만 했다면, 프로젝트 구조 자체를 이해 못했을 것 같다.
- 왜 이 인터페이스가 필요한지
- 왜 DIP(의존성 역전 원칙)를 지켜야 하는지
- 왜 레이어를 분리해야 하는지

테스트 가능한 구조를 만들다 보니 자연스럽게 **좋은 설계**가 뭔지 체감할 수 있었다.

## 이번 주 배운 핵심

- **단위 테스트**: 도메인 로직의 정합성 검증 (빠르고 가볍게)
- **통합 테스트**: 실제 Bean과 DB가 연결된 상태에서 비즈니스 흐름 전체를 검증
- **테스트 더블**: Mock, Stub, Fake 등을 활용해 의존성 격리하기
- **테스트 가능한 구조**: 외부 의존성을 인터페이스로 분리하고, 생성자 주입으로 제어하기

다음 주부터는 본격적으로 도메인 설계와 요구사항 분석을 해볼 예정! 테스트라는 무기를 손에 쥐고 나니 뭔가 더 자신감이 생긴다.
