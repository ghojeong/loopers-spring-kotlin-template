# Round 10 Quests

---

## Implementation Quest

이번에는 Spring Batch 를 활용해 주간, 월간 랭킹을 제공해 볼 거예요.
이전에 적재했던 `product_metrics` 와 같은 일간 집계정보를 기반으로 **주간, 월간 랭킹 시스템을 구축**해봅니다.

## Must-Have 무조건 하세요

- Spring Batch
- Batch Processing
- Materialized View (Statistics)

### 과제 정보

이번 주는 대규모 데이터 집계 및 조회 전용 구조에 대한 설계를 진행해 봅니다.

### (1) Spring Batch Job 구현

- 하루치 메트릭 테이블을 읽어 데이터를 집계하고 처리해봅니다.
  - 대상 테이블 : `product_metrics`
  - Chunk-Oriented 방식을 통해 대량의 데이터를 읽고 처리할 수 있도록 구성해 보세요.

### (2) Materialized View 설계

- 집계 결과를 조회 전용 테이블 (MV) 로 저장합니다.
  - `mv_product_rank_weekly` : 주간 TOP 100 랭킹
  - `mv_product_rank_monthly` : 월간 TOP 100 랭킹

### (3) Ranking API 확장

- 기존 Ranking 을 제공하는 GET `/api/v1/rankings?date=yyyyMMdd&size=20&page=1` 에서 기간 정보를 전달받아 API 로 일간, 주간, 월간 랭킹을 제공할 수 있도록 개선합니다.

---

## Checklist

### Spring Batch

- [ ]  Spring Batch Job 을 작성하고, 파라미터 기반으로 동작시킬 수 있다.
- [ ]  Chunk Oriented Processing (Reader/Processor/Writer or Tasklet) 기반의 배치 처리를 구현했다.
  - [ ]  하루치 메트릭 테이블(`product_metrics`)을 읽어 데이터를 집계하고 처리했다.
- [ ]  집계 결과를 저장할 Materialized View 의 구조를 설계하고 올바르게 적재했다.
  - [ ]  `mv_product_rank_weekly` : 주간 TOP 100 랭킹
  - [ ]  `mv_product_rank_monthly` : 월간 TOP 100 랭킹

### Ranking API

- [ ]  API 가 일간, 주간, 월간 랭킹을 제공하며 조회해야 하는 형태에 따라 적절한 데이터를 기반으로 랭킹을 제공한다.
- [ ] 기존 Ranking 을 제공하는 GET `/api/v1/rankings?date=yyyyMMdd&size=20&page=1` 에서 기간 정보를 전달받아 API 로 일간, 주간, 월간 랭킹을 제공할 수 있도록 개선한다.

---

## Technical Writing Quest

이번 주에 학습한 내용, 과제 진행을 되돌아보며  
**"내가 어떤 판단을 하고 왜 그렇게 구현했는지"** 를 글로 정리해봅니다.  
**좋은 블로그 글은 내가 겪은 문제를, 타인도 공감할 수 있게 정리한 글입니다.**

## Technical Writing Guide

### 작성 기준

| 항목 | 설명 |
| --- | --- |
| **형식** | 블로그 |
| **길이** | 제한 없음, 단 꼭 **1줄 요약 (TL;DR)** 을 포함해 주세요 |
| **포인트** | “무엇을 했다” 보다 **“왜 그렇게 판단했는가”** 중심 |
| **예시 포함** | 코드 비교, 흐름도, 리팩토링 전후 예시 등 자유롭게 |
| **톤** | 실력은 보이지만, 자만하지 않고, **고민이 읽히는 글**예: “처음엔 mock으로 충분하다고 생각했지만, 나중에 fake로 교체하게 된 이유는…” |

---

### 좋은 톤은 이런 느낌이에요

내가 겪은 실전적 고민을 다른 개발자도 공감할 수 있게 풀어내자

| 특징 | 예시 |
| --- | --- |
| 내 언어로 설명한 개념 | Stub과 Mock의 차이를 이번 주문 테스트에서 처음 실감했다 |
| 판단 흐름이 드러나는 글 | 처음엔 도메인을 나누지 않았는데, 테스트가 어려워지며 분리했다 |
| 정보 나열보다 인사이트 중심 | 테스트는 작성했지만, 구조는 만족스럽지 않다. 다음엔… |

### 피해야 할 스타일

| 예시 | 이유 |
| --- | --- |
| 많이 부족했고, 반성합니다… | 회고가 아니라 일기처럼 보입니다 |
| Stub은 응답을 지정하고… | 내 생각이 아닌 요약문처럼 보입니다 |
| 테스트가 진리다 | 너무 단정적이거나 오만해 보입니다 |

### Retrospective

- 단순히 “무엇을 했다”가 아니라, **10주 동안 어떻게 성장했는지**를 돌아본다.
- “기능 구현” 중심이 아니라, **사고방식/문제 해결/설계 선택 과정** 중심으로 기록한다.
- 이 글은 **개인 포트폴리오**이자, 앞으로 학습 방향을 스스로 점검하는 기준점이 된다.

### 담으면 좋은 내용

- **전체 여정 요약**
  - 1~10주차 동안 다뤘던 주요 테마 및 문제점들을 간단히 돌아보기
  - 단순 나열이 아니라, **흐름이 어떻게 연결되었는지** 를 강조
- **가장 큰 전환점**
  - **내 기존의 사고방식이 바뀌었다** 싶은 순간
  - *예: 4주차 트랜잭션/락을 통해 단순 @Transactional 이상의 고민을 알게 된 점, 7주차 이벤트 분리를 통해 ‘확장성’에 눈을 뜬 경험*
- **나의 Trade-off 판단**
  - 실습 중 내가 내린 중요한 선택 1~2개
  - 왜 그 선택을 했고, 대안은 뭐였는지, 지금 다시 한다면 어떻게 할 건지
- **실전과의 연결**
  - “이건 실제 회사/서비스에서 써먹을 수 있겠다” 싶은 포인트
  - *예: 캐시 무효화 전략, Kafka 기반 집계, Resilience4j 설정 등*

### Mentor’s Message**

이번 10주 동안 우리는 **단순한 CRUD를 넘어서, 실제 서비스에서 마주치는 문제들을 단계적으로 풀어왔습니다**. 현업에서 여러분들이 활약하기 위해 어떤 것들을 알면 좋을지, 문제를 접근하고 해석하는 방법, 문제에 맞는 적절한 해답을 도출하는 방법 등을 전달하려고 노력했어요.

- **1~3주차** : 도메인 모델링, 계층 분리, 객체 협력 설계
- **4~6주차** : 트랜잭션과 동시성, 읽기 최적화, 외부 시스템(결제 PG) 연동과 회복 탄력성
- **7~9주차** : 이벤트 기반 분리, Kafka와 실시간 집계, 랭킹 시스템 구축
- **10주차** : 배치와 Materialized View를 통한 대규모 집계와 조회 최적화

즉, **이커머스라는 시나리오를 통해 → 설계 → 동시성 → 성능 → 회복력 → 이벤트 → 확장성 → 데이터 파이프라인 → 집계** 까지, 실무에서 다루는 거의 모든 챕터를 작은 스케일로 경험해 본 셈입니다.

하지만 여기서 끝이 아닙니다.

- 실제 서비스는 **더 많은 데이터와 트래픽, 더 복잡한 요구사항** 속에서 움직입니다.
- 새로운 기능을 추가할 때마다, 이번 과정에서 배운 **Trade-off와 선택의 기준**이 반복해서 필요합니다.
- 이직, 프로젝트, 사이드 개발 등 어떤 길을 가더라도, 지금 경험한 **문제 정의 → 분석 → 해결** 과정은 계속해서 쓰이게 될 것이고 힘이 되어줄 겁니다.

이제는 여러분이 스스로 문제를 정의하고, 배운 도구와 방법을 적용하며, 더 깊은 학습으로 나아갈 차례입니다.

루프팩 BE L2는 끝났지만, **여러분의 성장 여정은 여기서부터가 시작**입니다.
